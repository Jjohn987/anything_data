<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>Visualizing European WWI Defense Treaties with iGraph in R</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
  

  
  <link href="/favicon.png" rel="icon">

  
  
  

  

  <meta name="description" content="My R blog, with projects in analytics, Chinese text analysis, data mining, and visualization">
  <meta name="keywords" content="">

  <meta name="author" content="Jeremy Johnson">

  
  <meta name="generator" content="Hugo 0.40.2" />

  
  

  
  

</head>
<body>


<header role="banner"><hgroup>
  
  <h1><a href="/">Anything is |Data| is Anything</a></h1>
    <h2>Centered around the investigation of things, ... in R!</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      

  </select>
</fieldset>


<ul class="main-navigation">
  
  
</ul>


<ul class="subscription">
  

</ul>


</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
    <p class="meta">Mar 14, 2018
         - 5 minute read 
         - <a href="/blog/2018-03-14-visualizing-european-wwi-defense-treaties-with-igraph-in-r/#disqus_thread">Comments</a>

        
        
        
            - <a class="label" href="/categories/network-analysis/">Network Analysis </a><a class="label" href="/categories/data-visualization/">Data Visualization </a>
        
    </p>
    <h1 class="entry-title">
         Visualizing European WWI Defense Treaties with iGraph in R 
    </h1>
</header>


        <div class="entry-content">
          
          
          
          
          <p>*Migrated from my Word Press blog</p>
<p>Network analysis and network visualization are two fascinating aspects of data science. Just about anything can be imagined as a network. The two basic requirements are:</p>
<ul>
<li>There should be a “distinct set of entities”, such as humans, organizations</li>
<li>There should exist a known relationship between these entities (Zweig, 5).</li>
</ul>
<p>Network analysis is useful when it can reveal much about structure, relationships, or arrangements. Likewise it can possibly reveal indirect effects between enities brought on by the network structure. (Zweig, 12)</p>
<p>Beginning a simple project, relationships between countries seemed to be a natural idea for me to use in order to learn about network visualization in R. So I decided to revisit the Correlates of War Project and access the <a href="http://www.correlatesofwar.org/data-sets/formal-alliances">alliances 4.1 dataset</a>. I also decided to use the <code>igraph</code> package in R. Working with it was more similar to base R in my opinion, especially plotting. However, manipulating the dataframe could be entirely done with dplyr too if you want to pre process the data without relying on igraph functions.</p>
<pre class="r"><code>library(tidyverse)
library(lubridate)
library(scales)
library(igraph)
##import data
Alliances &lt;- read_csv(&quot;alliance_v4.1_by_directed.csv&quot;)</code></pre>
<p>The dataset is quite expansive but for the purposes at hand (European Defense Treaties relating to World War I) I choose treaties that occured between 1878 and 1914.</p>
<div id="data-cleaning" class="section level2">
<h2>Data cleaning</h2>
<pre class="r"><code>## Create an interval object to find treaty dates
Beginning &lt;- ymd(1878, truncated = 2L)
End &lt;- ymd(1914, truncated = 2L)
Alliance_Timeline &lt;- interval(Beginning, End)
##clean up the data
Tidy_Alliances &lt;- Alliances %&gt;% select(ID = version4id, CC1 = ccode1, CC2 = ccode2, From = state_name1, To = state_name2, contains(&quot;dyad&quot;), defense, neutrality, nonaggression,entente) %&gt;%
unite(Start_Date, c(&quot;dyad_st_month&quot;, &quot;dyad_st_day&quot;, &quot;dyad_st_year&quot;), sep = &quot;-&quot;) %&gt;%
unite(End_Date, c(&quot;dyad_end_month&quot;, &quot;dyad_end_day&quot;, &quot;dyad_end_year&quot;), sep = &quot;-&quot;) %&gt;% 
mutate(Start_Date = mdy(Start_Date), End_Date = mdy(End_Date)) 

##Filter for specific years and only European countries. 
Key_Treaties &lt;- Tidy_Alliances %&gt;% filter(Start_Date %within% Alliance_Timeline, End_Date %within% Alliance_Timeline) %&gt;%
  distinct(From) %&gt;%
  filter(!From %in% c(&quot;Brazil&quot;, &quot;Argentina&quot;, &quot;Uruguay&quot;))</code></pre>
<p>Now that’s the basic data frame which I’m going to use to create my node and edge dataframes. The next idea is to create a dataframe of edges (with additional attributes) as well as a dataframe of vertices (with attributes) for igraph.</p>
<pre class="r"><code>## Create a look up vector with the sides of each country at start of WW1.
Sides &lt;- c(&quot;Austria-Hungary&quot; = &quot;Central Powers&quot;, &quot;Bulgaria&quot; = &quot;Central Powers&quot;, &quot;China&quot; = &quot;Allies&quot;, &quot;France&quot; = &quot;Allies&quot;, &quot;Germany&quot; = &quot;Central Powers&quot;, &quot;Greece&quot; = &quot;Neutral&quot;, &quot;Italy&quot; = &quot;Central Powers&quot;, &quot;Japan&quot; = &quot;NA&quot;,
&quot;Korea&quot; = &quot;NA&quot;, &quot;Russia&quot; = &quot;Allies&quot;, &quot;Spain&quot; = &quot;Neutral&quot;, &quot;Turkey&quot; = &quot;Central Powers&quot;, &quot;United Kingdom&quot; = &quot;Allies&quot;, &quot;United States of America&quot; = &quot;Allies&quot;, &quot;Yugoslavia&quot; = &quot;Allies&quot;)

##Create Edge data frame
Edges &lt;- Tidy_Alliances %&gt;%
  filter(Start_Date %within% Alliance_Timeline, End_Date %within% Alliance_Timeline, From %in% Key_Treaties$From) %&gt;%
  group_by(From, To) %&gt;%
  select(From, To) %&gt;%
  mutate(width = n()) %&gt;%
  distinct()

##Create Vertices data frame
Vertices_Weights &lt;- Edges %&gt;%
  select(From, To) %&gt;%
  gather(Key, Country) %&gt;%
  group_by(Country) %&gt;%
  mutate(size = n()) %&gt;% 
  ungroup() %&gt;%
  select(Country, size) %&gt;%
  distinct()

Vertices &lt;- data.frame(Country = Edges$From, Side = Sides[Edges$From], stringsAsFactors = FALSE) %&gt;% distinct()</code></pre>
<p>By adding special vertex and edge attributes the igraph plot can become more interesting. This means unique colors for the nodes (based on which “side” countries fought for) and node/edge weights (based on their total number of treaties for the time period).</p>
<pre class="r"><code>##Create our igraph object
Treaty_igraph &lt;- graph_from_data_frame(d = Edges, vertices = Vertices, directed = F)

V(Treaty_igraph)$size &lt;- Vertices_Weights$size
V(Treaty_igraph)$sides &lt;- Sides[vertex_attr(Treaty_igraph)$name]
V(Treaty_igraph)$color &lt;- ifelse(V(Treaty_igraph)$sides == &quot;Allies&quot;, &quot;cornflowerblue&quot;, ifelse(V(Treaty_igraph)$sides == &quot;Central Powers&quot;, &quot;olivedrab&quot;, &quot;gainsboro&quot;))
V(Treaty_igraph)$size &lt;- rescale(V(Treaty_igraph)$size, to = c(10, 20))

E(Treaty_igraph)$arrow.mode &lt;- 0

Treaty_igraph &lt;- delete.vertices(Treaty_igraph, V(Treaty_igraph)$name[V(Treaty_igraph)$name == &quot;United States of America&quot;|V(Treaty_igraph)$name == &quot;Korea&quot;|V(Treaty_igraph)$name == &quot;Japan&quot;])</code></pre>
<p>I rescaled the node sizes with “rescale” and I deleted the United States, Korea, and Japan nodes and edges with “delete.vertices” because they were isolated and didn’t seem relevant to any time before 1914. I’d have also deleted China for the same reason, where it not for its sole connection to Russia.</p>
<pre class="r"><code>##plot our graph
par(bg=&quot;snow2&quot;)
plot(Treaty_igraph, rescale = TRUE, displaylabels = TRUE, remove.multiple = TRUE,
     vertex.label.dist = 1.75, vertex.label.cex = .8, vertex.label = V(Treaty_igraph)$name, label.cex = 2, edge.curved = .2,
     vertex.frame.color = &quot;black&quot;, vertex.col = V(Treaty_igraph)$color, vertex.label.color = &quot;black&quot;,
     arrow.mode = E(Treaty_igraph)$arrow.mode, edge.color = &quot;darkgoldenrod2&quot;, edge.weight = E(Treaty_igraph)$width, main = &quot;European Treaties 1878-1914&quot;, sub = &quot;Defense Pacts and Ententes&quot;)
legend(x=-1.5, y=-1.1, c(&quot;Allies&quot;,&quot;Central Powers&quot;, &quot;Neutral&quot;), 
       col=&quot;#777777&quot;, c(&quot;cornflowerblue&quot;, &quot;olivedrab&quot;, &quot;grey&quot;), pt.cex=1, cex=1, bty=&quot;n&quot;, ncol=1)</code></pre>
<p><img src="/post/2018-05-06-visualizing-european-wwi-defense-treaties-with-igraph-in-r_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="closing-statements" class="section level2">
<h2>Closing Statements</h2>
<p>And there is my World War I network plot.</p>
<p>In closing, I mainly wanted to get aquainted with igraph plotting (technicality) as opposed to analytical concepts (which I didn’t use here). I feel like I accomplished that goal.</p>
<p>However, we can easily see that Austria-Hungary, Germany, and Russia were the major players in power and diplomacy at the time.</p>
<p>That being said, I feel that network analysis is quite exciting and the possibilities are quite rich. And perhaps the dataset I borrowed might hold other useful gems!I close by saying that I hope everybody enjoyed this entry and that they may find it useful or inspiring to check out igraph and other network tools in R.</p>
<p><strong>Citations</strong></p>
<p>Gibler, Douglas M. 2009. International military alliances, 1648-2008 (Version 4.1). CQ Press.<br />
Zweig, K. A. (2013). Network analysis literacy: A practical approach to network analysis project design. Vienna: Springer Verlag GmbH. <a href="http://kateto.net/networks-r-igraph">This igraph tutorial</a></p>
</div>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Jeremy Johnson</span></span>
    
    <time>Mar 14, 2018</time>
    
      <span class="categories">
        Tags:
        
          <a class="category" href="/tags/igraph">igraph</a>  <a class="category" href="/tags/network-analysis">network analysis</a>  <a class="category" href="/tags/wwi-defense-treaties">WWI Defense Treaties</a>  <a class="category" href="/tags/correlates-of-war-project">Correlates of War Project</a>  
    
    </span>
  </p>

  
  

  

  <p class="meta">
    
        <a class="basic-alignment left" href="/blog/2017-07-01-top-mba-programs-by-us-news/" title="Top MBA Programs by US News">Top MBA Programs by US News</a>
    

    
      <a class="basic-alignment right" href="/blog/2018-04-01-visualizing-european-ww1-defense-treaties-with-igraph/" title="Visualizing European WW1 Defense Treaties with iGraph">Visualizing European WW1 Defense Treaties with iGraph</a>
    
  </p>
  
    
      <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'anything-is-data-is-anything';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    
      <h1>About Me</h1>
    

    <p>
      
        I&rsquo;m Jeremy, and am deeply interested in data science. Especially R.
  <br><br>
  But my educational background is in <strong>Chinese</strong> and German. <strong>Think that&rsquo;s unrelated with R</strong>? <br>
  <br> Well, I see language is a door to another world, and data science as a skillset to understanding it. <br><br> <strong>Anything is Data, and Data is Anything</strong>.
  </br><br>
<strong>Me on Other Platforms:</strong>  </br>
      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/Jjohn987/" title="https://github.com/Jjohn987/"><i class="fa fa-github fa-3x"></i></a>
      
      
      
      
         
      
      <a target="_blank" href="https://www.linkedin.com/in/jeremy-johnson-09016a112" title="https://www.linkedin.com/in/jeremy-johnson-09016a112"><i class="fa fa-linkedin fa-3x"></i></a>
      <a target="_blank" href="https://stackexchange.com/users/11094434/superball10000" title="https://stackexchange.com/users/11094434/superball10000"><i class="fa fa-stack-overflow fa-3x"></i></a>
      
      
      
      
      

    
    
    </li>
  </ul>

  

  

  
  
  
    
      <section class="even">
        <h1>Recent Posts</h1>
        <ul id="recent_posts">
          
          
            
              <li class="post">
                <a href="/blog/2018-05-06-on-relocating-to-github/netlify/">On Relocating to Github/Netlify</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2018-04-01-visualizing-european-ww1-defense-treaties-with-igraph/">Visualizing European WW1 Defense Treaties with iGraph</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2018-03-14-visualizing-european-wwi-defense-treaties-with-igraph-in-r/">Visualizing European WWI Defense Treaties with iGraph in R</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2017-07-01-top-mba-programs-by-us-news/">Top MBA Programs by US News</a>
              </li>
            
          
            
              <li class="post">
                <a href="/blog/2017-01-24-international-organization-growth-trend/">International Organization Growth Trend</a>
              </li>
            
          
        </ul>
      </section>
    
  
</aside>

  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2018 Jeremy Johnson - <a href="/license/">License</a> -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>






</body>
</html>

