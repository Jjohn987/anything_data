<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title></title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
  

  
  <link href="/favicon.png" rel="icon">

  
  
  

  

  <meta name="description" content="My R blog, with projects in analytics, text analysis, data mining, and visualization. I might occasionally include Chinese text.">
  <meta name="keywords" content="">

  <meta name="author" content="Jeremy Johnson">

  
  <meta name="generator" content="Hugo 0.40.2" />

  
  
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-118999723-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


  
  

</head>
<body>


<header role="banner"><hgroup>
  
  <h1><a href="/">Anything is |Data| is Anything</a></h1>
    <h2>The investigation of things...</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      
        <option value="/index.html">» Blog</option>
      
        <option value="/projects/Projects">» My Projects</option>
      

  </select>
</fieldset>


<ul class="main-navigation">
  
  
    
      <li><a href="/index.html" title="Blog" >Blog</a></li>
    
  
    
      <li><a href="/projects/Projects" title="My Projects" >My Projects</a></li>
    
  
</ul>


<ul class="subscription">
  

</ul>


</nav>


<div id="main">
  
        <div class="entry-content">
          
          
          
          
          <div id="TOC">
<ul>
<li><a href="#predicting-churn-with-telecom-data">Predicting Churn with Telecom Data</a><ul>
<li><a href="#exploring-numeric-data">Exploring Numeric Data</a></li>
<li><a href="#exploring-categorical-data">Exploring Categorical Data</a></li>
<li><a href="#modeling">Modeling</a></li>
<li><a href="#model-test-performance">Model Test Performance</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
<li><a href="#shiny-app---halo-5-stats">Shiny App - Halo 5 Stats</a><ul>
<li><a href="#purpose">Purpose</a></li>
<li><a href="#technology-learned">Technology Learned</a></li>
<li><a href="#about-the-app">About the App</a></li>
</ul></li>
</ul>
</div>

<p><link rel="stylesheet" href="/custom_css.css">
<br></p>
<p>My R projects are works using R which are analytical, informative, predictive, or display a useful skill/technology for industry, such as Shiny.
<br>
<br></p>
<hr />
<div id="predicting-churn-with-telecom-data" class="section level2">
<h2>Predicting Churn with Telecom Data</h2>
<p><br>
This project used machine learning to predict customer churn in a telecom company. The data came from the UCI machine learning repository, and consisted of 19 columns, along with 3333 rows for training and 1667 for testing. First, I explored the data structure – the distributions, relationships between variables, and the class balances and imbalances.</p>
<div id="exploring-numeric-data" class="section level3">
<h3>Exploring Numeric Data</h3>
<p>The data were mostly well-behaved. However, notice on the left panel the column “number vmail messages”, which shows that most customers don’t have any. As far as how distributions differ for different churn outcomes, the density plot (pictured right) shows that churn and non-churn customers have similar distributions across the numeric variables. However, in the case of “total day charge” and “total day minutes”, churners make longer calls and rack up higher phone bills than non-churners do. This is useful information.</p>
<center>
<div class = "", display:inline-block> <img src = "/1_Distributions.jpeg" width = 350 height = 350>
&nbsp; &nbsp; 
    
<img src = "/2_distributions.jpeg" width = 350 height = 350> </div>
</center>
<p>For the purpose of showing more about the numeric variable relationships, here are two (out of four) panels of scatterplots. Mainly we can see that churn and non-churn outcomes don’t appear to be linearly separable. Despite there being some clustering in a few of the variables, most of the churn and non-churn cases overlap. which suggests that linear classifier models shouldn’t be considered for use in predicting churn.</p>
<center>
<div class = ""; display: inline-block> <img src = "/pairs1.jpeg" width = 300, height = 300>
&nbsp; &nbsp; &nbsp;<img src = "/pairs2.jpeg" width = 300 height = 300></div>
</center>
<p><br></p>
</div>
<div id="exploring-categorical-data" class="section level3">
<h3>Exploring Categorical Data</h3>
<center>
<img src = "/3_categorical_distributions.png" width = 500 height = 300>
</center>
<p>An important insight shown here is that nearly half of the customers on an international plan are ones who end up churning. This is even more extraordinary when we consider the severe disproportion between the two classes of customers ( shown below) – Despite being greatly outnumbered, “churners” make up a significant portion of customers on an international plan. In a similar (but lesser) light, customers that churn are more likely to not be on a voice mail plan than on one. Area code has no connection with churn.</p>
<center>
<img src = "/churnclassplot.jpeg" width = 400 height = 250>
</center>
<p>State demographics don’t indicate any clear pattern for churn rates. (below)</p>
<center>
<img src = "/4_state_distributions.png">
</center>
<p>Churn and non-churn rates mapped to states also does not reveal any striking information, save for that three of the largest states do seem to have more churn.</p>
<center>
<img src = "/5_states.png">
</center>
<p><strong>Exploratory Findings</strong></p>
<p>1.) Continuous predictors don’t appear linearly separable, so linear models won’t be considered for modeling.<br>
2.) International plan and voice mail seem informative, as does total day charges. Perhaps a few states with super high or low churn rates will be informative in a model.<br>
3.) There’s severe class imbalance in churn outcome which may pose challenges. This means that our model can achieve high accuracy just by guessing “no” for churn in every case. Therefore our model’s goal should not be overall accuracy, but instead aim at identifying cases of “churn = yes” (sensitivity).<br></p>
</div>
<div id="modeling" class="section level3">
<h3>Modeling</h3>
<p>Only non-linear models (mostly tree-based) were used in this project. The training data was made into two versions, one using the regular set of variables, and another using an “expanded set” where categorical variables were coded into binary (1-0) values. The models used were K-Nearest-Neighbors, C50, Random Forest, and Gradient Boosted Machine.</p>
<p><strong>K Nearest Neighbors</strong>
The best fit had a sensitivity of .23, specificity of .97, and ROC of .66. The best fit chose a parameter of K = 5. Since sensitivity was so low, it is clear that KNN was unable to effectively identify customers that will churn.</p>
<p><strong>C50</strong>
The optimal model achieved a sensitivity of .75, a specificity of .98, and ROC of .90. It used the expanded predictor set, and chose a “rules” model with no winnow.</p>
<p><strong>Random Forest</strong>
Sensitivity was .735, specificity was .987, and ROC was .90. The optimal Random Forest model used the expanded training set, choosing a parameter of “mtry” = 41.</p>
<p><strong>Gradient Boosted</strong>
GBM trained with the expanded predictor set achieved a sensitivity of .735. Optimal tuning parameters were: 1000 trees, interaction.depth = 5, shrinkage = 0.1, and n.minobsinnode = 10.</p>
</div>
<div id="model-test-performance" class="section level3">
<h3>Model Test Performance</h3>
<p>The model performances on the holdout testing data were very similar to their cross validated training performances.</p>
<center>
<img src = "/sensitivity.png" width = 500 height = 300>
</center>
<p>For the holdout test data, the C50 model built on the expanded dataset achieved the highest sensitivity value at .741. This performance was consistent with its training performance.</p>
<p><strong>Further Model Improvements</strong></p>
<p>There are further methods that can be used to improve our ability to predict churn accurately. When dealing with class imbalance, a classification model can be improved by changing the probability threshold of the prediction. Think of this as lowering the bar for the “evidence needed” to make a prediction – instead of determining a probability of 0.5 or higher as “yes”, we might broaden the decision range to 0.3 and higher to capture more values (and incur a certain amount of error as a tradeoff).</p>
<center>
<img src = "/roc_curve.png" width = 500 height = 325>
</center>
<p>Pictured above, changing the decision threshold to a lower value such as .2 will presumably raise the C50 model’s sensitivity from .74 to .84, at little cost to specificity. Going beyond this point gives little raise to sensitivity and incurs a lot of false positives thereafter. Ideally, to alter the decision threshold would require testing on more data in order to be confident that this method is improving our ability to predict churn. Since there is no other data for testing, here it is safer not to alter the decision threshold.</p>
</div>
<div id="conclusion" class="section level3">
<h3>Conclusion</h3>
<p>The best models are the C50 and Random Forest models built on the expanded set of predictors. The most optimal model for predicting “churn = yes” correctly was the C50 model trained on the expanded training set. With a sensitivity of .74, it will correctly identify 74% of the customers that will churn. The model’s performance in terms of sensitivity can be further improved by altering the decision threshold cutoffs. However, without more data to test on, doing so would potentially result in bias.</p>
<hr />
</div>
</div>
<div id="shiny-app---halo-5-stats" class="section level2">
<h2>Shiny App - Halo 5 Stats</h2>
<p><br></p>
<div id="purpose" class="section level3">
<h3>Purpose</h3>
<p>The purpose of this project was to learn Shiny, R Studio’s powerful framework for packaging R code into web applications. With Shiny, the possibilities for communicating data are endless, including connecting to API’s or creating dashboards that update in real time. You might embed a machine learning model for producing results on the go, or track metrics that constantly update. I wanted to demonstrate these concepts with an exciting data source.</p>
</div>
<div id="technology-learned" class="section level3">
<h3>Technology Learned</h3>
<p>I learned R’s <code>Shiny</code> package. I learned fundamentals of Bootstrap and CSS, and how to parse JSON data as well. After sharing the development version with Microsoft’s (343 Industries) Halo API maintainers, I was granted access to a developer’s key to share this app with the worldwide Halo 5 community.</p>
</div>
<div id="about-the-app" class="section level3">
<h3>About the App</h3>
<p>Search for a player’s name, and this app will connect to Microsoft’s Halo 5 API, import their game data, and create beautiful charts for downloading. To use, try searching for Hairball9000 (or any other player) and toggle options relating to the graphical inputs.
<br></p>
<iframe src="https://jjohn9000.shinyapps.io/Halo_5_Stats" width="100%," height="600" scrolling="yes">
</iframe>
</div>
</div>

        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Jeremy Johnson</span></span>
    
    <time>Jan 1, 0001</time>
    
    </span>
  </p>

  
  

  

  <p class="meta">
    

    
  </p>
  
    
      <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'anything-is-data-is-anything';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
  
</footer>

      </article>
    </div>
  </div>
</div>

<footer role="contentinfo">
  <p>Copyright &copy; 2019 Jeremy Johnson - <a href="/license/">License</a> -
  <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
</p>

</footer>






</body>
</html>

